## 静态页面与交互实现细节 🤝

#####作者：宣正吉
**梗概：** 包含静态页面组织的组件和外观设计、图片设计和优化等内容细节，也包含具体的时间安排。

---

### 时间节点

**4/10~4/13** 预计 5~6 天完成所有静态页面的编写和设计，根据功能与需求分析文档，需要完成主页面基础组件 + 固定页面、主要功能页面、附加功能页面几个部分，工作时间分配大致安排：

| 时间分配 |      具体时段      |         完成内容          |                     包含的页面内容                     |
| :------: | :----------------: | :-----------------------: | :----------------------------------------------------: |
|   2 天   |  4/10 日~4/11 日   | 主页面基础组件 + 固定页面 | 侧边导航栏 + 顶部功能栏 + 登录窗口 + 信息栏 + 无效链接 |
|   2 天   |  4/12 日~4/13 日   |       主要功能页面        |                  酒店 + 火车票 + 旅游                  |
|  1~2 天  | 4/14 ~ **4/15** 日 |       附加功能页面        |             机票 + 汽车票·船票 + 我的订单              |

### 基础组件 + 固定页面

脚手架采用`next.js`的初始化方案`npx create-next-app@latest`，执行`npm run dev`在开发环境下运行，且该脚手架支持`tailwindcss`，非常方便。

#### 侧边导航栏

这个部分实际上要搭配右侧内容宽度进行布局，因此需要先用 antd 做整体布局效果，选择 antd 中已经存在的布局，利用 `vh` 做全屏伸缩布局：

<img src="images/静态1.png"/>

左侧是导航栏，右侧是内容区域。

左侧导航栏用既有组件`Menu`实现，组件在 sider 文件夹的`sider.js`中，共有 9 个一级标签页，二级标签页内容暂时待定，可从后台 mock 数据当中抽取。每个标签页都有独立的`id`属性，这部分数据后面在实现功能的过程中还可以抽取数据，用代码生成，所以不用写太多假数据，实现效果：

<img src="images/静态2.png"/>

<font color=red> **好奇功能：** 似乎导航栏利用的不是 antd 组件，是怎么实现的呢？</font>

导航栏中的图标采用阿里巴巴矢量图标库`iconfont`实现，`antd`支持引入网络 icon，可以链接阿里巴巴图标库进行开发。
实现效果：

<img src="images/静态3.png"/>

导航栏上方设计一个按钮，点击按钮，整个菜单会折叠成简约版本，鼠标移入则展开成完全版本。可以通过`antd`中的收起内嵌菜单实现，只需要修改`Menu`组件的一个参数和添加一个控制折叠的 js 代码即可。

但需要注意的是，这个折叠组件需要作为状态放在外面的布局`Side`组件中，传递给子组件通过 button 改变状态，因为这个布局特性是外部 layout 独有的。

实现效果：
<img src="images/静态4.png"/>
<img src="images/静态5.png"/>

#### 顶部功能栏

最左侧是我们的 LOGO，LOGO 是我自己设计的，引入效果如下，上边栏在 pages 的 toper 文件夹中，叫做`Toper`。
功能栏采用 flex 布局，利用各种组件实现，包含弹窗、下拉菜单两种主要组件。
其中通过修改弹窗组件的内容部分可以产生多样布局的泡泡弹窗。
实现效果：
<img src="images/静态6.png"/>

为了提高用户体验，搜索功能希望在输入内容后，按下键盘 Enter 键能够触发搜索操作，事件绑定到`keyUp`操作中。但是我们在前端中并没有涉及到搜索操作的实现，所以这里在按下 enter 键时，显示一个提示泡泡在最上方，标记我们按下了 enter 键。

#### 登录弹窗

登录弹窗组件可以直接放在工具栏当中，因为登录操作不需要从父组件获得任何信息，只需要改变 cookie 当中的存储状态即可。这里把登录按钮更改为下拉菜单的形式，可通过点击注销退出 cookie 登录的状态。用户名和密码的状态也可以保留在工具栏组件当中。

**cookie 存储的流程：**

由于登录的部分内容还有很多，准备将登录作为一个独立组件。

点击登录按钮，弹出提示框，输入用户名和密码，点击登录按钮。

第一次登录时，检验用户名密码（==后期要 mock，将此部分更改为请求响应模式==），如果符合要求，则“请登录”变为欢迎！+ 用户名，并将 token 存储在 cookie 中，

==这里把右侧二维码改为 antd 的二维码控件，能够自动把 url 转换为二维码。==

##### 登陆部分

登录分为 3 类：用户名密码登录、手机号登录和扫码登陆。

**用户名密码登录：** 输入用户名和密码，发送到后台校验，校验成功后保存到本地 cookie，而后

**手机号登录：** 此登录方法校验可手机号，通过设置校验规则的正则表达式实现。

**扫码登陆：** 仍然采用之前生成二维码的组件。

最终效果：

<img src="images/静态7.png"/>
<img src="images/静态8.png"/>
<img src="images/静态9.png"/>

#### 信息栏

实际上这个部分就是位于整个布局的`footer`部分，实现起来也很容易，这部分也可以采用多栏布局，组件是`footer`页文件夹中的`Info`。

多栏布局采用`import { Col, Divider, Row } from 'antd';`实现，各个部分可以设置不同比例，例如最后一列是前面两列的一倍宽，文字部分每个标题下面是两个列表，均分宽度。

这里注意下部的页面大部分内容可能都是从后端调出来的，可以用 js 代码实现列表的渲染。

实现效果：
<img src="images/静态10.png"/>
